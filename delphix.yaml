template: name_of_template
api_key: app_key_token in KMS
config:
  notes: description *optional*
  data-sources:
    - postgres:
        notes: Here are notes
        replica: Default
        source: dbdhcp3
        start-order: 1
        ami: ami-0dfffed98347ecd
connectors:
  - postgres:
      host: host_ref_in_kms
      port: kms_ref
      database: db_name
      username: kms_ref
      password: kms_ref
environments:
  - staging:
      branch: origin/staging
      datapod: staging-pod
      data-sources:
        - oracle-source *arbit-name*:
            ami: ami-0dfffed98347ecd *optional*
      connectors *overwrite*:
        - oracle-connector:
            database: name_of_db_in_kms
      when:
        - push: datapod.refresh
  - uat:
      branch: origin/testing
      datapod: test
      when:
        - push: datapod.refresh
        - pull-request-create: datapod.create
        - pull-request-closed: datapod.delete
  - develop:
      branch: origin/develop
      datapod: Develop
      when:
        - push: datapod.refresh
  - all:
      when:
        - build-failure: bookmark.create
        - bookmark-complete: datapod.undo
